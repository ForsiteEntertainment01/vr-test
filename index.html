<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Stereoscopic 360 Video Viewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <style>
      body {
        margin: 0;
        background: black;
        overflow: hidden;
      }
    </style>
  </head>

  <body>
    <!-- Hidden HTML5 video element -->
    <video
      id="vr-video"
      autoplay
      muted
      loop
      playsinline
      webkit-playsinline
      crossorigin="anonymous"
      style="display: none"
    >
      <source src="https://vr-streaming-hosting-test.s3.us-east-2.amazonaws.com/HIGH_RES_UNDERWATER_ForyoutubefromMediaEncoder.mp4" type="video/mp4" />
      Your browser does not support HTML5 video.
    </video>

    <!-- A-Frame scene -->
    <a-scene>
      <a-assets>
        <video id="video" src="#vr-video" autoplay="true" loop="true" crossorigin="anonymous" muted playsinline webkit-playsinline></video>
      </a-assets>

      <a-videosphere src="#vr-video" stereo="top-bottom" rotation="0 -90 0"></a-videosphere>

      <a-camera position="0 1.6 0"></a-camera>
    </a-scene>

    <!-- iOS tap-to-play workaround -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const video = document.getElementById("vr-video");

        // Attempt autoplay (might be blocked)
        video.play().catch(() => {
          // iOS may block autoplay â€” wait for user gesture
          const tapToPlay = () => {
            video.play();
            document.body.removeEventListener("touchend", tapToPlay);
          };
          document.body.addEventListener("touchend", tapToPlay);
        });
      });
    </script>
  </body>
</html>
